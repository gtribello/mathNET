<!-- === BEGIN HEADER === -->
<!DOCTYPE html>
<!--[if IE 8]> <html lang="en" class="ie8"> <![endif]-->
<!--[if IE 9]> <html lang="en" class="ie9"> <![endif]-->
<!--[if !IE]><!--> <html lang="en"> <!--<![endif]-->
<head>
        <!-- Title -->
        <title>conditional-expectation-problems</title>
        <!-- Meta -->
        <meta http-equiv="content-type" content="text/html; charset=utf-8" />
        <meta name="description" content="">
        <meta name="author" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
        <!-- Favicon -->
        <link href="favicon.html" rel="shortcut icon">
        <!-- Bootstrap Core CSS -->
        <link rel="stylesheet" href="assets/css/bootstrap.css" rel="stylesheet">
        <!-- W3 stylesheet for badges in level indicator -->
        <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
        <!-- Template CSS -->
        <link rel="stylesheet" href="assets/css/animate.css" rel="stylesheet">
        <link rel="stylesheet" href="assets/css/font-awesome.css" rel="stylesheet">
        <link rel="stylesheet" href="assets/css/nexus.css" rel="stylesheet">
        <link rel="stylesheet" href="assets/css/responsive.css" rel="stylesheet">
        <link rel="stylesheet" href="assets/css/custom.css" rel="stylesheet">
        <!-- Google Fonts-->
        <link href="http://fonts.googleapis.com/css?family=Lato:400,300" rel="stylesheet" type="text/css">
        <link href="http://fonts.googleapis.com/css?family=Open+Sans:400,300" rel="stylesheet" type="text/css">
        <!-- MathJax -->
        <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
          tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}
        });
        </script>
        <script type="text/javascript" async
          src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML">
        </script> 
        <!-- Blockly -->
        <script src="https://www.google.com/jsapi"></script>
        <script src="blockly/demos/interpreter/acorn_interpreter.js"></script>
        <script src="blockly/blockly_compressed.js"></script>
        <script src="blockly/blocks_compressed.js"></script>
        <script src="blockly/javascript_compressed.js"></script>
        <script src="blockly/python_compressed.js"></script>
        <script src="blockly/msg/js/en.js"></script>
        <!-- My tools -->
        <script src="assets/scripts/isingSpinControls.js" type="text/javascript"> </script>
        <script src="assets/scripts/plottingTools.js" type="text/javascript"> </script>
        <script src="assets/scripts/randomVariables.js" type="text/javascript"> </script>
        <style>
           .w3-badge {cursor:pointer}
           .w3-badge {height:13px;width:13px;padding:0}
        </style>
<style type="text/css">
.highlight .hll { background-color: #ffffcc }
.highlight  { background: #f8f8f8; }
.highlight .c { color: #408080; font-style: italic } /* Comment */
.highlight .err { border: 1px solid #FF0000 } /* Error */
.highlight .k { color: #008000; font-weight: bold } /* Keyword */
.highlight .o { color: #666666 } /* Operator */
.highlight .ch { color: #408080; font-style: italic } /* Comment.Hashbang */
.highlight .cm { color: #408080; font-style: italic } /* Comment.Multiline */
.highlight .cp { color: #BC7A00 } /* Comment.Preproc */
.highlight .cpf { color: #408080; font-style: italic } /* Comment.PreprocFile */
.highlight .c1 { color: #408080; font-style: italic } /* Comment.Single */
.highlight .cs { color: #408080; font-style: italic } /* Comment.Special */
.highlight .gd { color: #A00000 } /* Generic.Deleted */
.highlight .ge { font-style: italic } /* Generic.Emph */
.highlight .gr { color: #FF0000 } /* Generic.Error */
.highlight .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.highlight .gi { color: #00A000 } /* Generic.Inserted */
.highlight .go { color: #888888 } /* Generic.Output */
.highlight .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.highlight .gs { font-weight: bold } /* Generic.Strong */
.highlight .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.highlight .gt { color: #0044DD } /* Generic.Traceback */
.highlight .kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: #008000 } /* Keyword.Pseudo */
.highlight .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.highlight .kt { color: #B00040 } /* Keyword.Type */
.highlight .m { color: #666666 } /* Literal.Number */
.highlight .s { color: #BA2121 } /* Literal.String */
.highlight .na { color: #7D9029 } /* Name.Attribute */
.highlight .nb { color: #008000 } /* Name.Builtin */
.highlight .nc { color: #0000FF; font-weight: bold } /* Name.Class */
.highlight .no { color: #880000 } /* Name.Constant */
.highlight .nd { color: #AA22FF } /* Name.Decorator */
.highlight .ni { color: #999999; font-weight: bold } /* Name.Entity */
.highlight .ne { color: #D2413A; font-weight: bold } /* Name.Exception */
.highlight .nf { color: #0000FF } /* Name.Function */
.highlight .nl { color: #A0A000 } /* Name.Label */
.highlight .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.highlight .nt { color: #008000; font-weight: bold } /* Name.Tag */
.highlight .nv { color: #19177C } /* Name.Variable */
.highlight .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.highlight .w { color: #bbbbbb } /* Text.Whitespace */
.highlight .mb { color: #666666 } /* Literal.Number.Bin */
.highlight .mf { color: #666666 } /* Literal.Number.Float */
.highlight .mh { color: #666666 } /* Literal.Number.Hex */
.highlight .mi { color: #666666 } /* Literal.Number.Integer */
.highlight .mo { color: #666666 } /* Literal.Number.Oct */
.highlight .sb { color: #BA2121 } /* Literal.String.Backtick */
.highlight .sc { color: #BA2121 } /* Literal.String.Char */
.highlight .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.highlight .s2 { color: #BA2121 } /* Literal.String.Double */
.highlight .se { color: #BB6622; font-weight: bold } /* Literal.String.Escape */
.highlight .sh { color: #BA2121 } /* Literal.String.Heredoc */
.highlight .si { color: #BB6688; font-weight: bold } /* Literal.String.Interpol */
.highlight .sx { color: #008000 } /* Literal.String.Other */
.highlight .sr { color: #BB6688 } /* Literal.String.Regex */
.highlight .s1 { color: #BA2121 } /* Literal.String.Single */
.highlight .ss { color: #19177C } /* Literal.String.Symbol */
.highlight .bp { color: #008000 } /* Name.Builtin.Pseudo */
.highlight .vc { color: #19177C } /* Name.Variable.Class */
.highlight .vg { color: #19177C } /* Name.Variable.Global */
.highlight .vi { color: #19177C } /* Name.Variable.Instance */
.highlight .il { color: #666666 } /* Literal.Number.Integer.Long */
</style>

</head>
<div id="pre_header" class="visible-lg"></div>
<div id="header" class="container">
        <div class="row">
                <!-- Logo -->
                <div class="logo">
                        <a href="index.html" title="">
                                <img src="assets/img/logo.png" alt="Logo" />
                        </a>
                </div>
                <!-- End Logo -->                <!-- Top Menu -->                <div class="col-md-12 margin-top-30">
                        <div id="hornav" class="pull-right visible-lg">
                                <ul class="nav navbar-nav">
                                          <li><span>Modules</span>
                                          <ul>
<li class="parent"><span>SOR3012</span><ul><li><a href="SOR3012.html"> SOR3012</a></li><li><a href="SOR30121-overview.html">  Random variables </a></li><li><a href="SOR30122-overview.html">  The central limit theorem </a></li><li><a href="SOR30123-overview.html">  Markov chains in discrete time </a></li><li><a href="SOR30124-overview.html">  Markov chains in continuous time </a></li></ul></li><li class="parent"><span>PHY9038</span><ul><li><a href="PHY9038.html"> PHY9038</a></li><li><a href="PHY90381-overview.html">  Newtons laws </a></li><li><a href="PHY90382-overview.html">  Mathematical prerequisits for statistical mechanics </a></li><li><a href="PHY90383-overview.html">  Statistical mechanics </a></li><li><a href="PHY90384-overview.html">  Computer simulations </a></li></ul></li><li class="parent"><span>AMA4004</span><ul><li><a href="AMA4004.html"> AMA4004</a></li><li><a href="AMA40041-overview.html">  Classical thermodynamics </a></li><li><a href="AMA40042-overview.html">  Statistical mechanics </a></li><li><a href="AMA40043-overview.html">  Statistical mechanics applications </a></li><li><a href="AMA40044-overview.html">  Computer simulations </a></li></ul></li>                                          </ul>
                                        <li><a href="index.html">Home</a></li>
                        </div>
                </div>
                <div class="clear"></div>
                <!-- End Top Menu -->
        </div>
</div>
<!-- === END HEADER === -->
<div id="content" class="container">   <div class="panel panel-blue">      <div class="panel-heading">         <div class="row">            <div class="col-md-8">                <h1 class="panel-title">Conditional Expectation
: Exercises</h1>            </div>            <div class="col-md-4" align="right">                  <!-- Web2PDF Converter Button BEGIN -->                   <script type="text/javascript">                   var                   pdfbuttonlabel="Save page as PDF"                   </script>                   <script src="http://www.web2pdfconvert.com/pdfbutton2.js" id="Web2PDF" type="text/javascript"></script>                   <!-- Web2PDF Converter Button END -->            </div>         </div>      </div>      <H1> Introduction </H1>
<DESCRIPTION>
The conditional expectation theorem states that the expectation for a discrete random variable can
be calculated using:
$$
\mathbb{E}(X) = \sum_{i=0}^\infty \mathbb{E}(X|Y=y_i)P(Y=y_i)
$$
The following exercises should teach you when it is appropriate to use the conditional expectation 
theroem to calculate expectations and when it is not appropriate as well as how to use the theorem.
</DESCRIPTION>
  <H1> Example problems </H1>
<p> Click on the problems to reveal the solution </p> 
<h4> Problem 1</h4><div class="panel panel-default">    <div class="panel-heading">        <h4 class="panel-title">        <a class="accordion-toggle" href="#collapse-0" data-parent="#accordion" data-toggle="collapse"><QUESTION>
Niall and Simone play backgammon every day and Niall wins a
fraction $p$ of these games.  Assume that the each game of backgammon is
independent and use the conditional expectation theorem to show that the expected
number of games that they will play, $\mathbb{E}(X_n)$, before Niall has a set
of $n$ consecutive victories is given
by:
\begin{equation}
\mathbb{E}(X_n) = \frac{1}{p}( 1 + \mathbb{E}(X_{n-1}) ) \label{eqn:niall}
\end{equation}
where $\mathbb{E}(X_{n-1})$ is the expected number of games they play before Niall
has $n-1$ consecutive victories.  Solve the above equation and show that:
\[
\mathbb{E}(X_n) = \sum_{i=1}^n \frac{1}{p^i}
\]
</QUESTION>
              </a>        </h4>    </div>    <div id="collapse-0" class="accordion-body collapse">        <div class="panel-body">            <div class="row"><SOLUTION>
<b> N.B. The solution to this problem is the same as the solution to the last problem on the problem sheet that was 
handed out during the Thursday lecture in week 4. </b>
<br/><br/>
We can calculate $\mathbb{E}(X_n)$ by conditioning on the value of $X_{n-1}$.  In other words we can use 
the conditional expectation theorem to write that:
$$
\mathbb{E}(X_n) = \sum_{k=n}^\infty \mathbb{E}(X_n|X_{n-1}=k)P(X_{n-1}=k)
$$
To calculate the conditional conditional expectation value, $\mathbb{E}(X_n|X_{n-1}=k)$ in this expression we use 
the conditional expectation theorem once more.  When doing this we condition on the outcome of the $(k+1)$th game 
of backgammon.  In the following equations the outcome of this $(k+1)$th game is indicated using the random variable $Y$:
\[
\begin{aligned}
\mathbb{E}(X_n|X_{n-1} = k) &amp; = \mathbb{E}(X_n| X_{n-1}=k \wedge Y=1)P(Y=1) +
                                 \mathbb{E}(X_n|X_{n-1}=k \wedge Y=0)P(Y=0) \\
                            &amp; = ( k + 1)p + (k + 1 + \mathbb{E}(X_n) )(1-p)  \\
                            &amp; = k + 1 + (1-p)\mathbb{E}(X_n)
\end{aligned}
\]
In the above solution we determine that $\mathbb{E}(X_n| X_{n-1}=k \wedge Y=1)=k+1$ by noting that if Niall has won the last $n-1$ 
games and if he wins the next game (the $(k+1)$th game in the sequence) he will have the required $n$-long 
streak of wins.  We determine that $\mathbb{E}(X_n| X_{n-1}=k \wedge Y=0)=k + 1 + \mathbb{E}(X_n)$ by noting that 
Nial's streak of $n$ victories will not have occured if he looses a game ($Y=0$) immediately after winning $n-1$ consecutive games.
His streak of wins will be too short by one in this case.  We further note that the outcome of each individual game is independent
and hence that we must wait a random number of games, $X_n$, before this winning streak occurs.  In this case we will thus will require
$k+1+X_n$ games to be played in total.  When we take the expectation of this <b>random</b> quantity and exploit the linearity
of this operator we get the result $\mathbb{E}(X_n| X_{n-1}=k \wedge Y=0)=k + 1 + \mathbb{E}(X_n)$. 
We can now insert the expression we obtained for $\mathbb{E}(X_n|X_{n-1} = k)$ into the expression for $\mathbb{E}(X_n)$ above 
and rearrange to get the desired answer as shown below: 
\[
\begin{aligned}
 \mathbb{E}(X_n) &amp; = \sum_{k=n}^\infty \mathbb{E}(X_n|X_{n-1}=k)P(X_{n-1}=k) \\
                 &amp; = \sum_{k=n}^\infty ( k + 1 + (1-p)\mathbb{E}(X_n) )P(X_{n-1}=k) \\
                 &amp; = \sum_{k=n}^\infty k P(X_{n-1}=k) + (1+ (1-p)\mathbb{E}(X_n) )\sum_{k=n}^\infty P(X_{n-1}=k) \\
                 &amp; = \mathbb{E}(X_{n-1}) + 1  + (1-p)\mathbb{E}(X_n) \\
\rightarrow \qquad \mathbb{E}(X_n) &amp; = \frac{1}{p}[ 1 + \mathbb{E}(X_{n-1}) ]                    
\end{aligned}
\]
To solve this we can use the fact that: $\mathbb{E}(X_1) = \frac{1}{p}$ as $X_1$ is a geometric random variable.  We can 
therefore get to:
\[
\mathbb{E}(X_2) = \frac{1}{p}[ 1 + \mathbb{E}(X_{1})] = \frac{1}{p}\left( 1 + 
\frac{1}{p} \right) = \frac{1}{p} + \frac{1}{p^2} = \sum_{i=1}^2 \frac{1}{p^i}
\]
We can then do:
\[
\mathbb{E}(X_3) = \frac{1}{p}( 1 + \mathbb{E}(X_2) ) = \frac{1}{p}\left( 1 + 
\sum_{i=1}^2 \frac{1}{p^i}\right) = \sum_{i=1}^3 \frac{1}{p^i}
\]
This pattern clearly continues and the result thus follows
</SOLUTION>
                </div>        </div>    </div></div><h4> Problem 2</h4><div class="panel panel-default">    <div class="panel-heading">        <h4 class="panel-title">        <a class="accordion-toggle" href="#collapse-1" data-parent="#accordion" data-toggle="collapse"><QUESTION>
Your tutorial operates with the following rules. You are trapped in a classroom with an infinite amount of work
to do.  At the beginning of the class, and every 5 minutes thereafter, you are
offered the chance to escape based on the roll of a fair dice.  If you get a 6
you are allowed to leave immediately, if you get a 1 you miss your next turn
so have to wait 10 minutes for your next chance to escape, if you roll any
other number you get a turn in 5 minutes.  Calculated the expected time you
will spend in the tutorial.
</QUESTION>
              </a>        </h4>    </div>    <div id="collapse-1" class="accordion-body collapse">        <div class="panel-body">            <div class="row"><SOLUTION>
$$
\mathbb{E}(X) = 30
$$
</SOLUTION>
                </div>        </div>    </div></div><h4> Problem 3</h4><div class="panel panel-default">    <div class="panel-heading">        <h4 class="panel-title">        <a class="accordion-toggle" href="#collapse-2" data-parent="#accordion" data-toggle="collapse"><QUESTION>
In a game show, there are 4 identical boxes, each containing a prize. 
The boxes contain 50, 100, 200 and 500 pounds.  You are asked to choose one box
and are allowed to keep the contents as your prize.  What is the expected value
of your prize?
</QUESTION>
              </a>        </h4>    </div>    <div id="collapse-2" class="accordion-body collapse">        <div class="panel-body">            <div class="row"><SOLUTION>
$$
\mathbb{E}(X) = 212.5
$$
</SOLUTION>
                </div>        </div>    </div></div><h4> Problem 4</h4><div class="panel panel-default">    <div class="panel-heading">        <h4 class="panel-title">        <a class="accordion-toggle" href="#collapse-3" data-parent="#accordion" data-toggle="collapse"><QUESTION>
A disorientated  explorer reaches a clearing in the jungle. There are three
paths leading from the clearing. Path 1 will takes him into deep forest that forces him 
to return to  the clearing after 2 hours.  Path 2 is also a dead-end that forces him to return after 3 hours 
of walking. Path 3 takes him to the village after 1 hour.  Assume the explorer will always select paths 1,2, and 3 with equal 
probabilities, irrespective of whether he found it to be a dead-end.  Calculate the expected value and standard deviation, $\sigma$, for 
the number of hours to reach the village.
</QUESTION>
              </a>        </h4>    </div>    <div id="collapse-3" class="accordion-body collapse">        <div class="panel-body">            <div class="row"><SOLUTION>
$$
\mathbb{E}(X) = 6 \qquad \sigma = \sqrt{38} 
$$
</SOLUTION>
                </div>        </div>    </div></div><h4> Problem 5</h4><div class="panel panel-default">    <div class="panel-heading">        <h4 class="panel-title">        <a class="accordion-toggle" href="#collapse-4" data-parent="#accordion" data-toggle="collapse"><QUESTION>
Consider the explorer from the previous problem once more but now assume that, although the explorer chooses the path at random, 
with equal probabilities, he will not choose a path that he has already established is a dead-end.  Calculate the expected time 
for him to reach the village, in this case. 
</QUESTION>
              </a>        </h4>    </div>    <div id="collapse-4" class="accordion-body collapse">        <div class="panel-body">            <div class="row"><SOLUTION>
The interesting thing about this variant on the problem is that we can't use conditioning in this case.  
The easiest way is to thus rely on enumerating all possibilities.
<br/><br/>
<table align="center">
<col width="150"/>
<col width="150"/>
<col width="150"/>
<tr><td> <b> Choice sequence </b> </td><td> <b> Total time </b> </td><td> <b> Probability </b> </td></tr>
<tr><td> 3 </td><td> 1 </td><td> $\frac{1}{3}$ </td></tr>
<tr><td> 1 3 </td><td> 2 + 1 = 3 </td><td> $\left(\frac{1}{3}\right)\left(\frac{1}{2}\right)= \frac{1}{6}$ </td></tr>
<tr><td> 2 3 </td><td> 3 + 1 = 4 </td><td> $\left(\frac{1}{3}\right)\left(\frac{1}{2}\right)=\frac{1}{6}$  </td></tr>
<tr><td> 1 2 3 </td><td> 2 + 3 + 1 = 6 </td><td> $\left(\frac{1}{3}\right)\left(\frac{1}{2}\right)(1)= \frac{1}{6}$ </td></tr>
<tr><td> 2 1 3 </td><td> 3 + 2 + 1 = 6 </td><td> $\left(\frac{1}{3}\right)\left(\frac{1}{2}\right)(1)= \frac{1}{6}$ </td></tr>
</table>
Inserting all this into the expression for the expectation gives:
$$
\begin{aligned}
 \mathbb{E}(X) &amp; = \left( 1 \times \frac{1}{3} \right) + \left( 3 \times
\frac{1}{6} \right) + \left( 4 \times \frac{1}{6} \right) + \left( 6 \times
\frac{1}{6} \right) + \left( 6 \times \frac{1}{6} \right) \\
 &amp; = \frac{1}{3} + \frac{1}{2} + \frac{2}{3} + 1 + 1 = 3.5
\end{aligned}
$$
</SOLUTION>
                </div>        </div>    </div></div>   </div></div><!-- === END CONTENT === -->
<!-- === BEGIN FOOTER === -->
<div id="base">
        <div class="container padding-vert-30">
                <div class="row">
                       <!-- Contact Details -->
                       <div class="col-md-3 margin-bottom-20">
                               <h3 class="margin-bottom-10">Contact Details</h3>
                               <p>School of Mathematics and Physics,<br />
                               Queen's University Belfast,<br />
                               Belfast,<br />
                               BT7 1NN</p>
                               <p>Email: <a href="mailto:g.tribello@qub.ac.uk">g.tribello@qub.ac.uk</a><br />
                               Website: <a href="http://titus.phy.qub.ac.uk/members/gareth/">mywebsite</a></p>
                       </div>
                       <!-- End Contact Details -->
                       <div class="clearfix"></div>
                </div>
        </div>
        <!-- Footer Menu -->
        <div id="footer">
                <div class="container">
                        <div class="row">
                                <div id="copyright" class="col-md-4">
                                        <p>(c) 2016 Gareth Tribello</p>
                                </div>
                        </div>
                </div>
        </div>
</div>
<!-- End Footer Menu -->
<!-- JS -->
<script type="text/javascript" src="assets/js/jquery.min.js" type="text/javascript"></script>
<script type="text/javascript" src="assets/js/bootstrap.min.js" type="text/javascript"></script>
<script type="text/javascript" src="assets/js/scripts.js"></script>
<!-- Isotope - Portfolio Sorting -->
<script type="text/javascript" src="assets/js/jquery.isotope.js" type="text/javascript"></script>
<!-- Mobile Menu - Slicknav -->
<script type="text/javascript" src="assets/js/jquery.slicknav.js" type="text/javascript"></script>
<!-- Animate on Scroll-->
<script type="text/javascript" src="assets/js/jquery.visible.js" charset="utf-8"></script>
<!-- Slimbox2-->
<script type="text/javascript" src="assets/js/slimbox2.js" charset="utf-8"></script>
<!-- Modernizr -->
<script src="assets/js/modernizr.custom.js" type="text/javascript"></script>
<!-- End JS -->
</body>
</html>
